<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æ˜¥å¿ƒå½¢ç¥ç¦ç‰¹æ•ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            overflow: hidden;
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
            height: 100vh;
            width: 100vw;
        }
        
        /* çƒŸèŠ±ç”»å¸ƒï¼ˆä¸­é—´å±‚ï¼‰ */
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
            display: none; /* åˆå§‹éšè— */
        }
        
        /* æç¤ºçª—å£æ ·å¼ - ä¿®æ”¹ä¸ºä¸æ¶ˆå¤± */
        .tip-window {
            position: absolute;
            width: 120px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
            opacity: 0;
            animation: fadeInStay 8s forwards;
            text-align: center;
            padding: 8px;
            font-weight: 500;
            color: #333;
            overflow: hidden;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* æ–°å¹´å¿«ä¹å­—æ · - æ”¹ä¸ºç‚«å½©é¢œè‰² */
        .new-year-text {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            pointer-events: none;
            font-size: 15vw;
            opacity: 0;
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
            font-weight: bold;
            letter-spacing: 10px;
            background: linear-gradient(45deg, 
                #ff0000, #ff7700, #ffff00, #00ff00, 
                #00ffff, #0000ff, #7700ff, #ff00ff, #ff0000);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
            text-shadow: 
                0 0 20px rgba(255, 255, 255, 0.5),
                0 0 40px rgba(255, 255, 255, 0.3);
            animation: 
                newYearFadeIn 8s ease-in-out forwards,
                gradientShift 5s ease-in-out infinite;
        }
        
        /* å¼€å§‹äº¤äº’é®ç½©å±‚ï¼ˆæ–‡æ¡ˆ+ç¡®å®šæŒ‰é’®åˆ†ç¦»ï¼‰ */
        .start-mask {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            z-index: 999;
            display: flex;
            flex-direction: column; /* å‚ç›´æ’åˆ—ï¼šæ–‡æ¡ˆåœ¨ä¸Šï¼ŒæŒ‰é’®åœ¨ä¸‹ */
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        /* æ–°æ˜¥æ–‡æ¡ˆæ ·å¼ */
        .start-text {
            font-size: 28px;
            color: white;
            margin-bottom: 40px; /* æ–‡æ¡ˆä¸æŒ‰é’®é—´è· */
            text-align: center;
            letter-spacing: 3px;
            text-shadow: 0 0 20px rgba(255, 0, 51, 0.7);
            animation: textPulse 2s infinite alternate;
        }
        
        /* ç¡®å®šæŒ‰é’®æ ·å¼ï¼ˆæ–°æ˜¥ä¸»é¢˜ï¼‰ */
        .confirm-btn {
            background: linear-gradient(45deg, #ffd700, #ff9900); /* é‡‘è‰²æ¸å˜ï¼Œæ›´æ˜¾æ–°æ˜¥æ°›å›´ */
            color: #d40000;
            border: none;
            padding: 18px 50px;
            font-size: 22px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.5s;
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.8);
            animation: btnPulse 2s infinite alternate;
        }
        
        .confirm-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            background: linear-gradient(45deg, #fffacd, #ffc107);
        }
        
        /* åŠ¨ç”» - ä¿®æ”¹ä¸ºæ·¡å…¥åä¿æŒæ˜¾ç¤º */
        @keyframes fadeInStay {
            0% {
                opacity: 0;
                transform: scale(0.5) rotate(-5deg);
            }
            15% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
            85% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
            100% {
                opacity: 1; /* ä¿®æ”¹ä¸ºä¿æŒæ˜¾ç¤º */
                transform: scale(1) rotate(0deg);
            }
        }
        
        /* æ–°å¹´å¿«ä¹å­—æ ·æ·¡å…¥åŠ¨ç”» */
        @keyframes newYearFadeIn {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
            100% {
                opacity: 0.8;
                transform: scale(1);
            }
        }
        
        /* ç‚«å½©æ¸å˜åŠ¨ç”» */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        /* æ–‡æ¡ˆå‘¼å¸åŠ¨ç”» */
        @keyframes textPulse {
            0% {
                opacity: 0.8;
                text-shadow: 0 0 20px rgba(255, 0, 51, 0.7);
            }
            100% {
                opacity: 1;
                text-shadow: 0 0 30px rgba(255, 0, 51, 0.9), 0 0 15px rgba(255, 100, 100, 0.6);
            }
        }
        
        /* æŒ‰é’®å‘¼å¸åŠ¨ç”» */
        @keyframes btnPulse {
            0% {
                opacity: 0.9;
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            }
            100% {
                opacity: 1;
                box-shadow: 0 0 40px rgba(255, 215, 0, 0.8), 0 0 20px rgba(255, 230, 0, 0.5);
            }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .tip-window {
                width: 100px;
                height: 50px;
                font-size: 14px;
            }
            
            .new-year-text {
                font-size: 20vw;
                letter-spacing: 5px;
            }
            
            /* å“åº”å¼æ–‡æ¡ˆ+æŒ‰é’® */
            .start-text {
                font-size: 22px;
                margin-bottom: 30px;
            }
            
            .confirm-btn {
                font-size: 18px;
                padding: 15px 40px;
                width: 80%;
            }
        }
        
        @media (max-width: 480px) {
            .start-text {
                font-size: 18px;
                margin-bottom: 25px;
                letter-spacing: 2px;
            }
            
            .new-year-text {
                font-size: 25vw;
                letter-spacing: 3px;
            }
            
            .confirm-btn {
                font-size: 16px;
                padding: 12px 30px;
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <!-- å¼€å§‹äº¤äº’ç•Œé¢ï¼ˆæ–‡æ¡ˆ+ç¡®å®šæŒ‰é’®ï¼‰ -->
    <div class="start-mask" id="startMask">
        <div class="start-text">ğŸæ–°å¹´å¿«ä¹ï¼Œè¯·æŸ¥æ”¶å±äºæ‚¨çš„æ–°æ˜¥ç¥ç¦ğŸ</div>
        <button class="confirm-btn" onclick="startBlessing()">ç¡®å®š</button>
    </div>
    
    <!-- çƒŸèŠ±ç”»å¸ƒ -->
    <canvas id="fireworksCanvas"></canvas>
    
    <!-- åœ¨è¿™é‡Œæ·»åŠ èƒŒæ™¯éŸ³ä¹ -->
    <audio id="backgroundMusic" loop preload="auto">
        <source src="regret.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ ã€‚
    </audio>
    
    <script>
        // ========== çƒŸèŠ±æ•ˆæœï¼ˆä¿æŒå¢å¼ºç‰ˆï¼‰ ==========
        class Fireworks {
            constructor() {
                this.canvas = document.getElementById('fireworksCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.fireworks = [];
                this.resize();
                window.addEventListener('resize', () => this.resize());
                this.animate();
                this.createFireworks();
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            createFireworks() {
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => this.createFirework(), i * 300);
                }
                setInterval(() => {
                    if (this.fireworks.length < 8) {
                        this.createFirework();
                    }
                }, 1500);
            }
            
            createFirework() {
                const x = Math.random() * this.canvas.width;
                const y = this.canvas.height;
                const targetY = Math.random() * this.canvas.height * 0.4;
                const speed = 3 + Math.random() * 2.5;
                const color = `hsl(${Math.random() * 80 + 280}, 100%, 60%)`;
                
                this.fireworks.push({
                    x, y, targetY,
                    speed, color,
                    size: 2.5,
                    trail: []
                });
            }
            
            createParticles(x, y, color) {
                const particleCount = 100 + Math.random() * 60;
                for (let i = 0; i < particleCount; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = 2.5 + Math.random() * 3.5;
                    const velocity = {
                        x: Math.cos(angle) * speed,
                        y: Math.sin(angle) * speed
                    };
                    
                    this.particles.push({
                        x, y,
                        velocity,
                        color,
                        size: 1.5 + Math.random() * 2.5,
                        life: 120 + Math.random() * 60,
                        decay: 0.94 + Math.random() * 0.05
                    });
                }
            }
            
            animate() {
                requestAnimationFrame(() => this.animate());
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.09)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                for (let i = this.fireworks.length - 1; i >= 0; i--) {
                    const firework = this.fireworks[i];
                    firework.trail.push({x: firework.x, y: firework.y});
                    if (firework.trail.length > 15) {
                        firework.trail.shift();
                    }
                    
                    for (let j = 0; j < firework.trail.length; j++) {
                        const point = firework.trail[j];
                        const alpha = j / firework.trail.length;
                        this.ctx.beginPath();
                        this.ctx.arc(point.x, point.y, firework.size * alpha * 1.2, 0, Math.PI * 2);
                        this.ctx.fillStyle = `rgba(${this.hexToRgb(firework.color)}, ${alpha * 0.7})`;
                        this.ctx.fill();
                    }
                    
                    firework.y -= firework.speed;
                    firework.x += Math.sin(Date.now() * 0.0015) * 0.7;
                    
                    this.ctx.beginPath();
                    this.ctx.arc(firework.x, firework.y, firework.size, 0, Math.PI * 2);
                    this.ctx.fillStyle = firework.color;
                    this.ctx.fill();
                    
                    this.ctx.beginPath();
                    this.ctx.arc(firework.x, firework.y, firework.size * 4, 0, Math.PI * 2);
                    const gradient = this.ctx.createRadialGradient(
                        firework.x, firework.y, 0,
                        firework.x, firework.y, firework.size * 4
                    );
                    gradient.addColorStop(0, firework.color.replace(')', ', 0.4)').replace('hsl', 'hsla'));
                    gradient.addColorStop(1, firework.color.replace(')', ', 0)').replace('hsl', 'hsla'));
                    this.ctx.fillStyle = gradient;
                    this.ctx.fill();
                    
                    if (firework.y <= firework.targetY) {
                        this.createParticles(firework.x, firework.y, firework.color);
                        this.fireworks.splice(i, 1);
                    }
                }
                
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    const particle = this.particles[i];
                    particle.x += particle.velocity.x;
                    particle.y += particle.velocity.y;
                    particle.velocity.y += 0.04;
                    particle.life *= particle.decay;
                    
                    if (particle.life <= 1) {
                        this.particles.splice(i, 1);
                        continue;
                    }
                    
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.ctx.fillStyle = `rgba(${this.hexToRgb(particle.color)}, ${particle.life / 100 * 0.8})`;
                    this.ctx.fill();
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(particle.x, particle.y);
                    this.ctx.lineTo(
                        particle.x - particle.velocity.x * 0.8,
                        particle.y - particle.velocity.y * 0.8
                    );
                    this.ctx.strokeStyle = `rgba(${this.hexToRgb(particle.color)}, ${particle.life / 200 * 0.6})`;
                    this.ctx.lineWidth = particle.size * 1.2;
                    this.ctx.stroke();
                }
            }
            
            hexToRgb(hex) {
                if (hex.startsWith('hsl')) {
                    const match = hex.match(/(\d+),\s*(\d+)%,\s*(\d+)%/);
                    if (match) {
                        const h = parseInt(match[1]);
                        const s = parseInt(match[2]);
                        const l = parseInt(match[3]);
                        return this.hslToRgb(h, s, l);
                    }
                }
                return '255, 255, 255';
            }
            
            hslToRgb(h, s, l) {
                s /= 100;
                l /= 100;
                const k = n => (n + h / 30) % 12;
                const a = s * Math.min(l, 1 - l);
                const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
                const r = Math.round(255 * f(0));
                const g = Math.round(255 * f(8));
                const b = Math.round(255 * f(4));
                return `${r}, ${g}, ${b}`;
            }
        }
        
        // ========== æ ¸å¿ƒé€»è¾‘ ==========
        const CONFIG = {
            points: 50,
            windowWidth: 120,
            windowHeight: 60,
            pointDelay: 90,
            tipDisplayTime: 8000
        };
        
        const TIPS = [
            "é¾™å¹´å¤§å‰ï¼Œä¸‡äº‹é¡ºæ„",
            "æ–°æ˜¥å¿«ä¹ï¼Œé˜–å®¶å¹¸ç¦",
            "èº«ä½“å¥åº·ï¼Œå¹³å®‰å–œä¹",
            "è´¢æºå¹¿è¿›ï¼Œå¯Œè´µå‰ç¥¥",
            "ç¬‘å£å¸¸å¼€ï¼Œå¥½è¿è¿è¿",
            "å¿ƒæƒ³äº‹æˆï¼Œç¾æ¢¦æˆçœŸ",
            "å¹´å¹´æœ‰ä½™ï¼Œå²å²æ— å¿§",
            "ç¦æ°”æ»¡æ»¡ï¼Œå–œæ°”æ´‹æ´‹",
            "é¾™é©¬ç²¾ç¥ï¼Œæ­¥æ­¥é«˜å‡",
            "å¹³å®‰å–œä¹ï¼Œå››å­£å®‰åº·",
            "æ–°æ˜¥å¤§å‰ï¼Œè¯¸äº‹é¡ºé‚",
            "å¥½è¿å¸¸åœ¨ï¼Œå–œäº‹ä¸´é—¨",
            "æ–°æ˜¥æ„‰å¿«ï¼Œå¹¸ç¦å¸¸ä¼´"
        ];
        
        let fireworks;
        let allTipWindows = []; // å­˜å‚¨æ‰€æœ‰çˆ±å¿ƒæç¤ºçª—å£
        
        function generateHeartPoints(numPoints) {
            const points = [];
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const scale = Math.min(window.innerWidth / 40, window.innerHeight / 40);
            
            for (let i = 0; i < numPoints; i++) {
                const t = i / numPoints * 2 * Math.PI;
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
                const adjustedY = -y;
                let pointX = centerX + x * scale;
                let pointY = centerY + adjustedY * scale;
                
                pointX = Math.max(CONFIG.windowWidth / 2, Math.min(pointX, window.innerWidth - CONFIG.windowWidth / 2));
                pointY = Math.max(CONFIG.windowHeight / 2, Math.min(pointY, window.innerHeight - CONFIG.windowHeight / 2));
                
                points.push({x: Math.round(pointX), y: Math.round(pointY)});
            }
            
            return points;
        }
        
        function getRandomColor() {
            const r = Math.floor(Math.random() * 56) + 200;
            const g = Math.floor(Math.random() * 56) + 200;
            const b = Math.floor(Math.random() * 56) + 200;
            return `rgb(${r}, ${g}, ${b})`;
        }
        
        function showTipWindow(x, y) {
            const tipWindow = document.createElement('div');
            tipWindow.className = 'tip-window';
            tipWindow.style.left = `${x - CONFIG.windowWidth / 2}px`;
            tipWindow.style.top = `${y - CONFIG.windowHeight / 2}px`;
            const bgColor = getRandomColor();
            tipWindow.style.backgroundColor = bgColor;
            const randomTip = TIPS[Math.floor(Math.random() * TIPS.length)];
            tipWindow.textContent = randomTip;
            document.body.appendChild(tipWindow);
            tipWindow.style.animationDuration = `${CONFIG.tipDisplayTime / 1000}s`;
            
            // ä¸å†è‡ªåŠ¨ç§»é™¤çˆ±å¿ƒçª—å£
            allTipWindows.push(tipWindow);
            return tipWindow;
        }
        
        function showNewYearText() {
            const newYearElement = document.createElement('div');
            newYearElement.className = 'new-year-text';
            newYearElement.textContent = 'æ–°å¹´å¿«ä¹';
            document.body.appendChild(newYearElement);
            
            // 25ç§’åæ·¡å‡ºå¹¶ç§»é™¤
            setTimeout(() => {
                newYearElement.style.opacity = '0';
                newYearElement.style.transition = 'opacity 3s ease-out';
                setTimeout(() => {
                    if (newYearElement.parentNode) {
                        newYearElement.parentNode.removeChild(newYearElement);
                    }
                }, 3000);
            }, 22000); // 22ç§’åå¼€å§‹æ·¡å‡º
        }
        
        function startHeartAnimation() {
            const points = generateHeartPoints(CONFIG.points);
            
            // æ¸…ç©ºä¹‹å‰çš„çª—å£
            allTipWindows = [];
            
            // ä¾æ¬¡æ˜¾ç¤ºæ‰€æœ‰å¿ƒå½¢æç¤ºï¼ˆä¸ä¼šæ¶ˆå¤±ï¼‰
            points.forEach((point, index) => {
                setTimeout(() => {
                    showTipWindow(point.x, point.y);
                }, index * CONFIG.pointDelay);
            });
            
            // åœ¨çˆ±å¿ƒæ˜¾ç¤ºç»“æŸåç­‰å¾…3ç§’ï¼Œç„¶åæ˜¾ç¤ºæ–°å¹´å¿«ä¹å­—æ ·
            // è®¡ç®—æœ€åä¸€ä¸ªçˆ±å¿ƒæ˜¾ç¤ºçš„æ—¶é—´ + 3ç§’ç­‰å¾…
            setTimeout(showNewYearText, (CONFIG.points * CONFIG.pointDelay) + 3000);
        }
        
        // ç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œå¯åŠ¨ç‰¹æ•ˆ
        function startBlessing() {
            // éšè—å¼€å§‹é®ç½©å±‚
            const startMask = document.getElementById('startMask');
            startMask.style.display = 'none';
            
            // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
            const bgMusic = document.getElementById('backgroundMusic');
            bgMusic.volume = 0.5; // è®¾ç½®éŸ³é‡å¤§å°ï¼ˆ0-1ä¹‹é—´ï¼Œ0.5è¡¨ç¤º50%éŸ³é‡ï¼‰
            bgMusic.play();
            
            // æ˜¾ç¤ºçƒŸèŠ±ç”»å¸ƒ
            document.getElementById('fireworksCanvas').style.display = 'block';
            // åˆå§‹åŒ–çƒŸèŠ±å’Œå¯åŠ¨å¿ƒå½¢åŠ¨ç”»
            fireworks = new Fireworks();
            setTimeout(startHeartAnimation, 500);
        }
        
        // é¡µé¢åŠ è½½åä»…æ˜¾ç¤ºå¼€å§‹ç•Œé¢ï¼Œä¸è‡ªåŠ¨å¯åŠ¨
        document.addEventListener('DOMContentLoaded', () => {});
        
        // ç§»é™¤ç‚¹å‡»è·³è¿‡å¼¹çª—çš„é€»è¾‘ï¼Œç‚¹å‡»å±å¹•æ— ä»»ä½•å¼¹çª—
        document.addEventListener('click', (e) => {
            const startMask = document.getElementById('startMask');
            if (startMask.style.display === 'none') {
                // ä»…ä¿ç•™ç‚¹å‡»ç©¿é€ï¼Œæ— å…¶ä»–æ“ä½œ
            }
        });
    </script>
</body>
</html>